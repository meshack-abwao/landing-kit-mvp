<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading...</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="loading" class="loading-screen">
        <div class="spinner"></div>
        <p>Loading store...</p>
    </div>

    <div id="error" class="error-screen" style="display: none;">
        <div class="error-icon">‚ö†Ô∏è</div>
        <h2>Store Not Found</h2>
        <p>This store doesn't exist or has been deactivated.</p>
    </div>

    <div id="app" style="display: none;">
        <!-- Hero Section (abc8 style - responds to theme) -->
        <section class="hero-section" id="heroSection">
            <div class="hero-content">
                <div class="professional-photo" id="heroPhoto"></div>
                <h1 class="professional-name" id="heroTitle"></h1>
                <p class="hero-tagline" id="heroSubtitle"></p>
                <div class="hero-cta" id="heroCta"></div>
            </div>
        </section>

        <!-- Featured Testimonial (optional) -->
        <div class="featured-testimonial" id="featuredTestimonial" style="display: none;">
            <div class="testimonial-content">
                <div class="testimonial-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <p class="testimonial-text" id="testimonialText"></p>
                <p class="testimonial-author" id="testimonialAuthor"></p>
            </div>
        </div>

        <main class="main" id="main"></main>

        <!-- Footer -->
        <footer class="store-footer" id="storeFooter">
            <p class="powered-by">Powered by <a href="https://jarisolutionsecom.store" target="_blank">jarisolutionsecom.store</a></p>
            <div class="policy-links" id="footerLinks">
                <span onclick="showPolicy('privacy')">Privacy Policy</span>
                <span onclick="showPolicy('terms')">Terms of Service</span>
                <span onclick="showPolicy('refund')">Refund Policy</span>
            </div>
        </footer>

        <div id="modalOverlay" class="modal-overlay" onclick="closeOnOverlay(event)">
            <div class="modal-content">
                <button class="modal-close" onclick="closeCheckout()">‚úï</button>
                
                <div class="checkout-step" id="step1">
                    <h2 class="step-title">Confirm Order</h2>
                    <div class="order-summary">
                        <div class="summary-row">
                            <span>Product</span>
                            <span id="summaryProductName"></span>
                        </div>
                        <div class="summary-row">
                            <span>Quantity</span>
                            <span id="summaryQuantity"></span>
                        </div>
                        <div class="summary-row">
                            <span>Unit Price</span>
                            <span>KES <span id="summaryUnitPrice"></span></span>
                        </div>
                        <div class="summary-total">
                            <span>Total</span>
                            <span>KES <span id="summaryTotal"></span></span>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="goToStep2()">Continue to Delivery</button>
                </div>

                <div class="checkout-step" id="step2">
                    <h2 class="step-title">Delivery Details</h2>
                    <form class="customer-form" id="customerForm">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" id="customerName" placeholder="John Doe" required>
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="tel" id="customerPhone" placeholder="0712345678" required>
                        </div>
                        <div class="form-group">
                            <label>Delivery Location</label>
                            <input type="text" id="customerLocation" placeholder="Westlands, Nairobi" required>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="goToStep3()">Continue to Payment</button>
                        <button type="button" class="btn btn-secondary" onclick="goToStep1()">Back</button>
                    </form>
                </div>

                <div class="checkout-step" id="step3">
                    <h2 class="step-title">Choose Payment</h2>
                    <div class="payment-options">
                        <div class="payment-option mpesa" onclick="selectPaymentMethod('mpesa')" id="mpesaOption">
                            <div class="payment-icon">üíö</div>
                            <div class="payment-text-container">
                                <div class="payment-text">M-Pesa Payment</div>
                                <div class="payment-subtext">Instant & Secure</div>
                            </div>
                            <div class="payment-checkmark">‚úì</div>
                        </div>
                        <div class="payment-option" onclick="selectPaymentMethod('cod')" id="codOption">
                            <div class="payment-icon">üíµ</div>
                            <div class="payment-text-container">
                                <div class="payment-text">Cash on Delivery</div>
                                <div class="payment-subtext">Pay when you receive</div>
                            </div>
                            <div class="payment-checkmark">‚úì</div>
                        </div>
                    </div>
                    <div class="cta-helper-text" id="ctaHelper">
                        <span id="paymentMethodText"></span>
                    </div>
                    <button class="complete-order-btn" id="completeOrderBtn" onclick="completeOrder()">
                        <span id="ctaButtonText">Complete Order</span>
                    </button>
                    <button class="btn btn-secondary" onclick="goToStep2()">Back</button>
                </div>

                <div class="checkout-step" id="loadingStep">
                    <div class="loading-spinner"></div>
                    <p class="loading-text">Processing your order...</p>
                </div>

                <div class="checkout-step" id="successStep">
                    <div class="success-icon">‚úì</div>
                    <h2 class="success-title">Order Confirmed!</h2>
                    <p class="success-order">Order #<span id="orderNumber"></span></p>
                    <div class="success-message" id="successMessage">Your order has been confirmed.</div>
                    <button class="btn btn-primary" onclick="closeCheckout()">Done</button>
                </div>
            </div>
        </div>

        <!-- Story Modal -->
        <div id="storyModal" class="story-modal" onclick="if(event.target === this) closeStory()">
            <button class="story-close" onclick="closeStory()">‚úï</button>
            <div id="storyContent" class="story-content"></div>
        </div>

        <!-- Policy Modal -->
        <div id="policyModal" class="policy-modal" onclick="if(event.target === this) closePolicy()">
            <div class="policy-content">
                <button class="policy-close" onclick="closePolicy()">‚úï</button>
                <h3 id="policyTitle">Policy</h3>
                <p id="policyText"></p>
            </div>
        </div>
    </div>

    <script type="module" src="/app.js"></script>
</body>
</html>
